name: Remove teams from the Copilot subscription for an organization
description: |-
  > [!NOTE]
  > This endpoint is in public preview and is subject to change.

  Sets seats for all members of each team specified to "pending cancellation".
  This will cause the members of the specified team(s) to lose access to GitHub Copilot at the end of the current billing cycle unless they retain access through another team.
  For more information about disabling access to Copilot, see "[Revoking access to Copilot for members of your organization](https://docs.github.com/copilot/managing-copilot/managing-github-copilot-in-your-organization/managing-access-to-github-copilot-in-your-organization/revoking-access-to-copilot-for-members-of-your-organization)."

  Only organization owners can cancel Copilot seats for their organization members.

  The response contains the total number of seats set to "pending cancellation".

  OAuth app tokens and personal access tokens (classic) need either the `manage_billing:copilot` or `admin:org` scopes to use this endpoint.
env: null
vars: null
setup: null
tests:
- name: Remove teams from the Copilot subscription for an organization
  description: |-
    > [!NOTE]
    > This endpoint is in public preview and is subject to change.

    Sets seats for all members of each team specified to "pending cancellation".
    This will cause the members of the specified team(s) to lose access to GitHub Copilot at the end of the current billing cycle unless they retain access through another team.
    For more information about disabling access to Copilot, see "[Revoking access to Copilot for members of your organization](https://docs.github.com/copilot/managing-copilot/managing-github-copilot-in-your-organization/managing-access-to-github-copilot-in-your-organization/revoking-access-to-copilot-for-members-of-your-organization)."

    Only organization owners can cancel Copilot seats for their organization members.

    The response contains the total number of seats set to "pending cancellation".

    OAuth app tokens and personal access tokens (classic) need either the `manage_billing:copilot` or `admin:org` scopes to use this endpoint.
  request:
    method: DELETE
    url: https://api.github.com/orgs/{org}/copilot/billing/selected_teams
    headers: null
    params: null
    body: null
  expect:
    status: 200
    schema: null
    jsonpath: null
    headers: null
dataset: null
teardown: null
